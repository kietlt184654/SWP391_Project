<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manage Construction Progress</title>
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <script src="/javascript/manageConstruction.js" defer></script>
    <link rel="stylesheet" href="/css/show_projects.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
<div class="sidebar close">
    <div class="logo-details">
        <i class='bx bxs-ship'></i>
        <span class="logo_name">KoiPond</span>
    </div>
    <ul class="nav-links">
        <!-- Sidebar content -->
    </ul>
</div>
<section class="home-section">
    <div class="home-content">
        <i class='bx bx-menu'></i>
    </div>  <div>
    <div th:if="${message}" class="alert alert-success" th:text="${message}"></div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
</div>

    <div class="project-container">
        <h2>All Projects</h2>
        <div th:each="project : ${projects}" class="project">
            <button class="toggle-btn" th:text="'Project ' + ${project.projectID}"></button>
            <div class="project-content">
                <div class="col-md-6 project-image">
                    <img th:src="@{${project.img}}" alt="Project Image" />
                </div>
                <div class="col-md-6 text-content">
                    <h4 th:text="${project.name}">Project Name</h4>
                    <p>
                        1. Information<br />
                        <strong>Customer Name:</strong> <span th:text="${project.customer.account.accountName}">Account
                                Name</span><br />
                        <strong>Address:</strong> <span
                            th:text="${project.customer.account.address}">Address</span><br />
                        <strong>Phone Number:</strong> <span th:text="${project.customer.account.phoneNumber}">Phone
                                Number</span><br />
                        <strong>Email:</strong> <span
                            th:text="${project.customer.account.email}">Email</span><br /><br />

                        2. Construction Timeline<br />
                        <strong>Start Date:</strong> <span th:text="${project.startDate}">Start Date</span><br />
                        <strong>Completion Date:</strong> <span th:text="${project.endDate}">End Date</span><br /><br />

                        3. Status and Priority<br />
                        <strong>Status:</strong>
                        <span th:if="${project.status == 'Canceled'}" style="color: red; font-weight: bold;" th:text="${project.status}"></span>
                        <span th:if="${project.status == 'COMPLETE'}" style="color: green; font-weight: bold;" th:text="${project.status}"></span>
                        <span th:if="${project.status == 'In Progress'}" style="color: orange; font-weight: bold;" th:text="${project.status}"></span>
                        <span th:if="${project.status == 'Pending'}" style="color: blue; font-weight: bold;" th:text="${project.status}"></span>
                        <span th:if="${project.status != 'Canceled' && project.status != 'COMPLETE' && project.status != 'In Progress' && project.status != 'Pending'}" th:text="${project.status}"></span>
                        <br />
                        <strong>Total Cost:</strong> <span th:text="${project.totalCost}">Cost</span><br />
                        <br />
                    </p>
                    <!-- Delete Button: Only visible for canceled projects -->
<!--                    <form th:if="${project.status == 'Canceled'}" th:action="@{/projects/delete}" method="POST" style="display: inline-block;">-->
<!--                        <input type="hidden" name="projectId" th:value="${project.projectID}" />-->
<!--                        <button-->
<!--                                type="submit"-->
<!--                                class="btn btn-danger"-->
<!--                                style="background-color: #dc3545; color: white; border: none;"-->
<!--                                onclick="return confirm('Are you sure you want to delete this project?');">-->
<!--                            Delete-->
<!--                        </button>-->
<!--                    </form>-->

                    <!-- Hide View button if project is canceled -->
                    <a th:if="${project.status != 'Canceled'}" th:href="@{'/projects/viewDetailProject/' + ${project.projectID}}">
                        <button class="btn btn-primary">View</button>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
<script src="/javascript/MaterialManagement.js"></script>
</body>

</html>
