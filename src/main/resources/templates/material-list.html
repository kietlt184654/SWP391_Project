<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <title>Material List</title>
  <link rel="stylesheet" href="/css/MaterialList.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
<div class="sidebar close">
  <div class="logo-details">
    <i class='bx bxs-ship'></i>
    <span class="logo_name">KoiPond</span>
  </div>
  <ul class="nav-links">
    <li>
      <a href="#">
        <i class='bx bx-grid-alt'></i>
        <span class="link_name">Dashboard</span>
      </a>
      <ul class="sub-menu blank">
        <li><a class="link_name" href="#">Dashboard</a></li>
      </ul>
    </li>
    <li>
      <div class="iocn-link">
        <a th:href="@{/account/customers}">
          <i class='bx bx-user'></i>
          <span class="link_name">Customer Management</span>
        </a>

      </div>
      <ul class="sub-menu">
        <li><a class="link_name" href="#">Customer Management</a></li>
      </ul>
    </li>
    <li>
      <div class="iocn-link">
        <a th:href="@{/projects/showProjects}">
          <i class='bx bx-folder'></i>
          <span class="link_name">Project Management</span>
        </a>
        <!-- <i class='bx bxs-chevron-down arrow'></i> -->
      </div>
      <ul class="sub-menu">
        <li><a class="link_name" href="#">Project Management</a></li>

      </ul>
    </li>
    <li>
      <div class="iocn-link">
        <a th:href="@{/staff}">
          <i class='bx bx-group'></i>
          <span class="link_name">Staff Management</span>
        </a>
        <!-- <i class='bx bxs-chevron-down arrow'></i> -->
      </div>
      <ul class="sub-menu">
        <li><a class="link_name" href="#">Staff Management</a></li>

      </ul>
    </li>
    <li>
      <a th:href="@{/manager/design/approval}">
        <i class='bx bx-check-circle'></i>
        <span class="link_name">Design Approval</span>
      </a>
      <ul class="sub-menu blank">
        <li><a class="link_name" href="#">Design Approval</a></li>
      </ul>
    </li>
    <li>
      <div class="iocn-link">
        <a href="#">
          <i class='bx bx-cube'></i>
          <span class="link_name">Material Management</span>
        </a>
        <i class='bx bxs-chevron-down arrow'></i>
      </div>
      <ul class="sub-menu">
        <li><a class="link_name" href="#">Material Management</a></li>
        <li><a th:href="@{/materials/list}">Material List</a></li>
        <li><a th:href="@{/materials/history}">Material History</a></li>
        <li><a th:href="@{/materials/historyofchanging}">Material Updated List</a></li>
      </ul>
    </li>
    <div class="profile-details">
      <div class="profile-content">
        <!--<img src="image/profile.jpg" alt="profileImg">-->
      </div>
      <form th:action="@{/account/logout}" method="post" class="ms-3">
        <button type="submit" class='bx bx-log-out'></button>
      </form>
    </div>
    </li>
  </ul>
</div>
<section class="home-section">
  <div class="home-content">
    <i class='bx bx-menu'></i>
  </div>
  <h1>MATERIAL LIST</h1>

  <!-- Biểu mẫu thêm nguyên vật liệu mới -->
  <h2>Add new materials</h2><br>
  <form class="add_form" th:action="@{/materials/add}" method="post">
    <label for="materialName">Name:</label>
    <input type="text" id="materialName" name="materialName" required>

    <label for="stockQuantity">Quantity:</label>
    <input type="number" id="stockQuantity" name="stockQuantity" required>

    <label for="unit">Unit:</label>
    <input type="text" id="unit" name="unit" required>

    <button type="submit">Add material</button>
  </form>

  <div th:if="${message}">
    <p th:text="${message}"></p>
  </div>
  <div th:if="${error}">
    <p th:text="${error}" style="color: red;"></p>
  </div>

  <table>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Quantity</th>
      <th>Unit</th>
      <th style="text-align: center;">Quantity update</th>
      <th>Action</th>
    </tr>
    <tr th:each="material : ${materials}">
      <td th:text="${material.materialId}"></td>
      <td th:text="${material.materialName}"></td>
      <td th:text="${material.stockQuantity}"></td>
      <td th:text="${material.unit}"></td>
      <td>
        <form th:action="@{/materials/{materialId}/update-quantity(materialId=${material.materialId})}" method="post">
          <label>Quantity change:</label>
          <input type="number" name="quantityChange" required>
          <label>Reson change:</label>
          <input type="text" name="reason" required>
          <button type="submit"><i class="bi bi-check2-square"></i></button>
        </form>
      </td>
      <td>
        <form th:action="@{/materials/{materialId}/delete(materialId=${material.materialId})}" method="post" onsubmit="return confirm('Bạn có chắc chắn muốn xóa?');">
          <button type="submit" class="btn-delete"><i class="bi bi-trash"></i></button>
        </form>
      </td>
    </tr>
  </table>
</section>
<script src="/javascript/MaterialManagement.js"></script>
</body>

</html>